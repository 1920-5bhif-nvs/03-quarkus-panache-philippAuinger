== Quarkus-Panache (Übung 03) - Philipp Auinger 5BHIF

=== Vorbereitung
==== Quarkus
* Erstellen des Quarkus-Projekts mit:
....
 mvn io.quarkus:quarkus-maven-plugin:0.11.0:create \
        -DprojectGroupId=at.htl.supermarket \
        -DprojectArtifactId=quarkus-panache-supermarket \
        -DclassName="at.htl.supermarket.ProductResource" \
        -Dpath="product"
....

* Hinzufügen der nötigen Dependencies für diese Aufgabe im link:\quarkus-panache-supermarket\pom.xml[pom.xml]
....
<dependency>
      <groupId>io.quarkus</groupId>
      <artifactId>quarkus-hibernate-orm</artifactId>
</dependency>
<dependency>
      <groupId>io.quarkus</groupId>
      <artifactId>quarkus-hibernate-orm-panache</artifactId>
</dependency>
<dependency>
      <groupId>io.quarkus</groupId>
      <artifactId>quarkus-jdbc-postgresql</artifactId>
</dependency>
....

==== Datenbank

* Erstellen/Starten der Postgres Datenbank:
....
docker run --name supermarket-postgres -p 5432:5432 -e POSTGRES_PASSWORD=passme -d postgres
....

* Für die Persistierung das link:quarkus-panache-supermarket\src\main\resources\META-INF\microprofile-config.properties[Konfigurationsfile] editieren:
....
# datasource
quarkus.datasource.url = jdbc:postgresql://192.168.99.100:5432/postgres
quarkus.datasource.driver = org.postgresql.Driver
quarkus.datasource.username = postgres
quarkus.datasource.password = passme

# database configs
quarkus.hibernate-orm.database.generation = drop-and-create
....

* Datasource in der IDE hinzufügen:

image::images/Datasource.PNG[]

image::images/IDEDatabase.PNG[]

=== Implementierung des Microprojects

==== InitBean
Implementierung der link:quarkus-panache-supermarket\src\main\java\at\htl\supermarket\business\InitBean.java[InitBean.java]

==== Panache Entitäten
TIP: Quelle: https://quarkus.io/guides/hibernate-orm-panache

===== Beispiel Entität "Person":
....
@Entity
@Inheritance(strategy = InheritanceType.JOINED)
@DiscriminatorColumn
public class Person extends PanacheEntity {

    public String firstname;
    public String lastname;
    public LocalDate birthdate;
    public String mobilePhone;
    public String email;

    public Person(String firstname, String lastname, LocalDate birthdate, String mobilePhone, String email) {
        this.firstname = firstname;
        this.lastname = lastname;
        this.birthdate = birthdate;
        this.mobilePhone = mobilePhone;
        this.email = email;
    }
}
....

IMPORTANT: Bei Panache sollte man laut Tutorial keine Getter und Setter verwenden sondern die Felder public machen, außer man will die Daten zum Beispiel im GETTER verändern. (.toUpperCase bei Namen, usw.)
